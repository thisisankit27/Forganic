{% load static %}
<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Register</title>
    <meta name="description" content="description">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'assets/images/favicon.png' %}" />
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/plugins.css' %}">
    <!-- Main Style CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}">
</head>

<body class="login-page">
    <div id="pre-loader">
        <img src="{% static 'assets/images/loader.gif' %}" alt="Loading..." />
    </div>
    <div class="page-wrapper">

        <!--Promotion Bar-->
        {% include 'Layout/PromotionBar.html' %}

        <!--Header-->
        {% include 'Layout/Header.html' %}

        <!-- Mobile Header -->
        {% include 'Layout/MobileHeader.html' %}

        <div id="page-content">
            <!--Body Container-->
            <!--Breadcrumbs-->
            <div class="breadcrumbs-wrapper">
                <div class="container">
                    <div class="breadcrumbs"><a href="/" title="Back to the home page">Home</a> <span
                            aria-hidden="true">|</span> <span>Create An Account</span></div>
                </div>
            </div>
            <!--End Breadcrumbs-->
            <!--Page Title with Image-->
            <div class="page-title">
                <h1>Create An Account</h1>
            </div>
            <!--End Page Title with Image-->
            <div class="container">
                <!--Main Content-->
                <div class="row">
                    <div class="col-12 col-sm-12 col-md-12 col-lg-12 box">
                        <div class="mb-4">
                            <h3>Personal Information</h3>
                            <form method="post" action="register" accept-charset="UTF-8" class="contact-form"
                                id="login-form">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerFirstName">First Name <span
                                                    class="required">*</span></label>
                                            <input id="CustomerFirstName" type="text" name="customer[first-name]"
                                                placeholder="" class="" autocorrect="off" autocapitalize="off" autofocus
                                                required>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerLastName">Last Name <span
                                                    class="required">*</span></label>
                                            <input id="CustomerLastName" type="text" name="customer[Last-name]"
                                                placeholder="" class="" autocorrect="off" autocapitalize="off" autofocus
                                                required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerEmail">Email Address <span
                                                    class="required">*</span></label>
                                            <input id="CustomerEmail" type="email" name="customer[email]" placeholder=""
                                                class="" autocorrect="off" autocapitalize="off" autofocus required>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerUsername">Username <span
                                                    class="required">*</span></label>
                                            <input id="CustomerUsername" type="text" name="customer[user-name]"
                                                placeholder="" class="" autocorrect="off" autocapitalize="off" autofocus
                                                required>
                                        </div>
                                    </div>
                                </div>
                                <h3>Login Information</h3>
                                <div class="row">
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerPassword">Password <span
                                                    class="required">*</span></label>
                                            <input id="CustomerPassword" type="password" name="customer[Password]"
                                                placeholder="" class="showPasswordToggle" autocorrect="off"
                                                autocapitalize="off" autofocus required>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <label for="CustomerConfirmPassword">Confirm Password <span
                                                    class="required">*</span></label>
                                            <input id="CustomerConfirmPassword" type="password"
                                                name="customer[ConfirmPassword]" placeholder=""
                                                class="showPasswordToggle" autocorrect="off" autocapitalize="off"
                                                autofocus required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-group form-check col-12 col-sm-12 col-md-12 col-lg-12">
                                        <label class="form-check-label padding-15px-left">
                                            <input type="checkbox" class="form-check-box" value=""
                                                onclick="showPassword()"> &nbsp;Show Password
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="text-left col-12 col-sm-12 col-md-6 col-lg-6">
                                        <div id="response-message" style="color: red;"></div>
                                        <input type="submit" class="btn mb-3" value="Submit">
                                    </div>
                                    <div class="text-right col-12 col-sm-12 col-md-6 col-lg-6">
                                        <a href="login">Â« Back To Login</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!--End Main Content-->
            </div><!--End Body Container-->

        </div><!--End Page Wrapper-->

        <!--Footer + Scroll Top-->
        {% include 'Layout/Footer.html' %}

        <!--MiniCart Drawer-->
        {% include 'Layout/MiniCartDrawer.html' %}

        <!-- Including Jquery -->
        <script src="{% static 'assets/js/vendor/jquery-min.js' %}"></script>
        <script src="{% static 'assets/js/vendor/js.cookie.js' %}"></script>
        <!-- Including Javascript -->
        <script src="{% static 'assets/js/plugins.js' %}"></script>
        <script src="{% static 'assets/js/main.js' %}"></script>

    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).on('submit', '#login-form', function (e) {
            e.preventDefault();

            $.ajax({
                type: 'POST',
                url: 'register',
                data:
                {
                    CustomerFirstName: $("#CustomerFirstName").val(),
                    CustomerLastName: $("#CustomerLastName").val(),
                    CustomerUsername: $("#CustomerUsername").val(),
                    CustomerEmail: $("#CustomerEmail").val(),
                    CustomerPassword: $("#CustomerPassword").val(),
                    CustomerConfirmPassword: $("#CustomerConfirmPassword").val(),
                },
                beforeSend: function (xhr, settings) {
                    if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type)) {
                        xhr.setRequestHeader("X-CSRFToken", $('input[name=csrfmiddlewaretoken]').val());
                    }
                },
                success: function (response) {
                    if (response.success) {
                        window.location.href = response.url;
                    } else {
                        var message = response.message;
                        $('#response-message').text(message);
                    }
                }
            })
        });
        function showPassword() {
            var passwordFields = document.querySelectorAll('.showPasswordToggle');
            for (var i = 0; i < passwordFields.length; i++) {
                if (passwordFields[i].type === "password") {
                    passwordFields[i].type = "text";
                } else {
                    passwordFields[i].type = "password";
                }
            }
        }
    </script>
</body>

</html>